{% extends "main.html" %}
{% block header %}
<div class="jumbotron">
    <h1 align="center">Black Market Brawlers</h1>
</div>
{% endblock %}

{% block body %}
<div>
    <script src="/static/js/toggle.js"></script>
    <script src="/static/js/datacharts.js"></script>

    <!-- Nav tabs -->
    <ul class="nav nav-tabs nav-justified" role="tablist">
        <li role="presentation" class="active"><a href="#Champions" aria-controls="Champions" role="tab"
                                                  data-toggle="tab">Champions</a></li>
        <li role="presentation"><a href="#Bans" aria-controls="Bans" role="tab" data-toggle="tab">Bans</a></li>
        <li role="presentation"><a href="#Minions" aria-controls="Minions" role="tab" data-toggle="tab">Minions</a></li>
        <li role="presentation"><a href="#Items" aria-controls="Items" role="tab" data-toggle="tab">Items</a></li>
    </ul>

    <!-- Tab panes -->
    <div class="tab-content">
        <div role="tabpanel" class="tab-pane fade in active" id="Champions">
            <div class="container">
                <div class="row" align="center" style="padding-top : 20px">
                    <button class="btn btn-primary" type="button" id="regions-all" onclick="champRegionToggle()">Toggle All</button>

                    <div class="btn-group " role="group" data-toggle="buttons-checkbox">

                        {% for r in regions %}
                        <button class="btn btn-default" type="button" id={{ "champions-" + r }}> {{ r.upper() }} </button>
                        {% endfor %}
                    </div>




                </div>
                <div class="row" align="center" style="padding-top : 20px">
                    <button class="btn btn-primary" type="button" id="tiers-all" onclick="champTierToggle()">Toggle All</button>
                    <div class="btn-group " role="group" data-toggle="buttons-checkbox">
                        {% for t in tiers %}
                        <button class="btn btn-default" type="button" name="tier" id={{ "champions-" + t }}>{{ t.title() }}</button>
                        {% endfor %}
                    </div>
                </div>
                <div class="row" align="center" style="padding-top : 20px">
                    <div class="btn-group " role="group">
                        <button type="button" id="winrate" class="btn btn-default" autocomplete="off" onclick="getChampWinRate()">Win Rate</button>
                        <button type="button" id="pickrate" class="btn btn-default" autocomplete="off" onclick="getChampPickRate()">Pick Rate</button>

                    </div>
                </div>
            </div>

            <style>

                rect {
                    fill: steelblue;
                }

                text {
                    fill: white;
                    font: 20px sans-serif;
                    text-anchor: end;
                }


            </style>
            <div class="container" style="padding : 20px">
                <div class="panel panel-default" >
                    <div class="panel-heading">Cool stuff in this panel</div>
                      <div class="panel-body" id="chart-container">

                        <svg id="champ-chart" class="champ-chart">

                        </svg>
                  </div>
            </div>
        </div>





        </div>
        <div role="tabpanel" class="tab-pane fade" id="Bans">Hello</div>
        <div role="tabpanel" class="tab-pane fade" id="Minions">...</div>
        <div role="tabpanel" class="tab-pane fade" id="Items">...</div>
    </div>

    <script>
        function champRegionToggle(){
            toggle({{ regions|tojson|safe }}, "champions");
        }

        function champTierToggle(){
            toggle({{ tiers|tojson|safe }}, "champions");
        }

        function getChampPickRate(){
            champChart( {{ regions|tojson|safe }}, {{ tiers|tojson|safe }}, '{{ url_for('get_results') }}', 'pickrate');
        }

        function getChampWinRate(){
            champChart( {{ regions|tojson|safe }}, {{ tiers|tojson|safe }}, '{{ url_for('get_results') }}', 'winrate');
        }

    </script>


</div>
{% endblock %}
